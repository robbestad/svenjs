!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):"object"==typeof exports?exports.Svenjs=t():e.Svenjs=t()}(this,function(){return function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={exports:{},id:o,loaded:!1};return e[o].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";var o=n(1),i=n(3),r=document.getElementById("myapp");o.render(i,r)},function(e,t,n){"use strict";!function(t,n){e.exports=n()}(void 0,function(){return function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={exports:{},id:o,loaded:!1};return e[o].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){var o;(function(e){var i=n(9),r=n(8),s=n(4),a=n(5),c=n(2),l=n(3),d=n(12),u=n(1),f=n(10),p={version:i.version,setState:s.setState,createStore:d.createStore,createComponent:a.createComponent,render:l.render,renderToString:l.renderToString,lifeCycle:c.lifeCycle,timeTravel:r.timeTravel,findDOMNode:f.findDOMNode,deepCopy:u.deepCopy};"object"==typeof e&&null!=e&&e.exports?e.exports=p:(o=function(){return p}.call(t,n,t,e),!(void 0!==o&&(e.exports=o)))}).call(t,n(13)(e))},function(e,t){var n=t.deepCopy=function(e){if(null===e||"object"!=typeof e||"isActiveClone"in e)return e;var t=e.constructor();for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(e.isActiveClone=null,t[o]=n(e[o]),delete e.isActiveClone);return t}},function(e,t,n){var o=n(3);t.lifeCycle=function(e){e.isMounted&&e._svenjs.rootNode&&(o.render(e,e._svenjs.rootNode),e.hasOwnProperty("componentDidUpdate")&&e.componentDidUpdate.apply(e))}},function(e,t){var n={}.toString,o=function(e){return"function"==typeof e},i=function(e){return"[object Object]"===n.call(e)},r=function(e){return"[object Array]"===n.call(e)},s=function(e,t){return t.appendChild(e)},a=Object.prototype.hasOwnProperty,c=function(e,t){if(e.hasOwnProperty("children")&&r(e.children)&&e.children.forEach(function(e){("string"==typeof e||"number"==typeof e)&&t.appendChild(document.createTextNode(e))}),a.call(e,"attrs")){var n=e.attrs;for(var i in n)if("config"!==i&&"key"!==i&&("disabled"!==i||n[i]!==!1))if("class"==i||"className"==i)t.className=n[i].toString();else if(o(n[i])&&"on"==i.slice(0,2))t[i.toLowerCase()]=n[i];else{if("checked"===i&&(n[i]===!1||""===n[i]))continue;t.setAttribute(""+i,n[i].toString())}}return t},l=function u(e,t){if("object"!=typeof e.children){if(!a.call(e,"tag"))return!1;a.call(e,"children")&&r(e.children)&&e.forEach(function(e){var n=document.createElement(e.tag);s(c(e,n),t)})}return a.call(e,"children")&&r(e.children)&&e.children.forEach(function(e,n){var o=e.tag;if(r(e))e.forEach(function(e,n){var o=document.createElement(e.tag);s(c(e,o),t),u(e,o)});else{"undefined"==typeof o&&(o="span");var i=document.createElement(o);s(c(e,i),t),u(e,i)}}),a.call(e,"tag")&&r(e)&&r(e)&&e.forEach(function(e){u(e,t)}),t},d=(t.renderToString=function(e){return d(e).innerHTML},function(e){var t=document.createDocumentFragment(),n=document.createElement(e.tag);c(e,n);var o=l(e,n);return t.appendChild(o),t});t.render=function(e,t){var n=arguments.length<=2||void 0===arguments[2]?!1:arguments[2];if(!t)return"Error: no node to attach rendered HTML";i(e)&&(a.call(e,"_svenjs")||(e._svenjs={rootNode:!1}),e._svenjs.rootNode=t),t.innerHTML="";var o=void 0;o=i(n)?n:e.render(),t.appendChild(d(o))}},function(e,t,n){var o=n(7),i=n(6),r=n(2);t.setState=function(e,t){t.state=o.saveState(t,e),t.time=i.saveHistory(t,e),r.lifeCycle(t)}},function(e,t,n){var o=n(4);n(11);t.createComponent=function(e){return e._svenjs={rootNode:!1},e.isBound||(e.isBound=!0,e.setState=function(e){return o.setState(e,this)}),e.isMounted||(e.time={history:[],pos:-1},e.isMounted=!0,void 0!==e.initialState&&(e.state=e.initialState),"function"==typeof e.componentDidMount&&e.componentDidMount.apply(e)),e}},function(e,t,n){var o=n(1);t.saveHistory=function(e,t){var n=void 0;return n=e.time?o.deepCopy(e.time):{history:[],pos:-1},n.history.splice(n.pos+1),n.history.push(o.deepCopy(t)),n.pos++,n}},function(e,t,n){var o=n(1);t.saveState=function(e,t){var n=o.deepCopy(t);return Object.freeze(n),n}},function(e,t,n){var o=n(1),i=n(2);t.timeTravel=function(e,t){var n=e.time,r=e.state;n.pos+=t,e.state=r,r=o.deepCopy(n.history[n.pos]),e.state=r,e.render(r,e._svenjs.rootNode),i.lifeCycle(e)}},function(e,t){t.version=function(){return"0.0.2-alpha"}},function(e,t){t.findDOMNode=function(e){}},function(e,t){t.log=function(e){e=e||"debug",console[e](this)}},function(e,t){var n=[];t.createStore=function(e){return e.isMounted||(e.listenTo=function(e){n.push(e)},e.emit=function(e){n.forEach(function(t){t(e)})},"function"==typeof e.init&&e.init.apply(e)),e}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}}])})},function(e,t,n){"use strict";!function(t,n){e.exports=n()}(void 0,function(){return function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={exports:{},id:o,loaded:!1};return e[o].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){var o;(function(e){var i=n(9),r=n(8),s=n(4),a=n(5),c=n(2),l=n(3),d=n(12),u=n(1),f=n(10),p={version:i.version,setState:s.setState,createStore:d.createStore,createComponent:a.createComponent,render:l.render,renderToString:l.renderToString,lifeCycle:c.lifeCycle,timeTravel:r.timeTravel,findDOMNode:f.findDOMNode,deepCopy:u.deepCopy};"object"==typeof e&&null!=e&&e.exports?e.exports=p:(o=function(){return p}.call(t,n,t,e),!(void 0!==o&&(e.exports=o)))}).call(t,n(13)(e))},function(e,t){var n=t.deepCopy=function(e){if(null===e||"object"!=typeof e||"isActiveClone"in e)return e;var t=e.constructor();for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(e.isActiveClone=null,t[o]=n(e[o]),delete e.isActiveClone);return t}},function(e,t,n){var o=n(3);t.lifeCycle=function(e){e.isMounted&&e._svenjs.rootNode&&(o.render(e,e._svenjs.rootNode),e.hasOwnProperty("componentDidUpdate")&&e.componentDidUpdate.apply(e))}},function(e,t){var n={}.toString,o=function(e){return"function"==typeof e},i=function(e){return"[object Object]"===n.call(e)},r=function(e){return"[object Array]"===n.call(e)},s=function(e,t){return t.appendChild(e)},a=Object.prototype.hasOwnProperty,c=function(e,t){if(e.hasOwnProperty("children")&&r(e.children)&&e.children.forEach(function(e){("string"==typeof e||"number"==typeof e)&&t.appendChild(document.createTextNode(e))}),a.call(e,"attrs")){var n=e.attrs;for(var i in n)if("config"!==i&&"key"!==i&&("disabled"!==i||n[i]!==!1))if("class"==i||"className"==i)t.className=n[i].toString();else if(o(n[i])&&"on"==i.slice(0,2))t[i.toLowerCase()]=n[i];else{if("checked"===i&&(n[i]===!1||""===n[i]))continue;t.setAttribute(""+i,n[i].toString())}}return t},l=function u(e,t){if("object"!=typeof e.children){if(!a.call(e,"tag"))return!1;a.call(e,"children")&&r(e.children)&&e.forEach(function(e){var n=document.createElement(e.tag);s(c(e,n),t)})}return a.call(e,"children")&&r(e.children)&&e.children.forEach(function(e,n){var o=e.tag;if(r(e))e.forEach(function(e,n){var o=document.createElement(e.tag);s(c(e,o),t),u(e,o)});else{"undefined"==typeof o&&(o="span");var i=document.createElement(o);s(c(e,i),t),u(e,i)}}),a.call(e,"tag")&&r(e)&&r(e)&&e.forEach(function(e){u(e,t)}),t},d=(t.renderToString=function(e){return d(e).innerHTML},function(e){var t=document.createDocumentFragment(),n=document.createElement(e.tag);c(e,n);var o=l(e,n);return t.appendChild(o),t});t.render=function(e,t){var n=arguments.length<=2||void 0===arguments[2]?!1:arguments[2];if(!t)return"Error: no node to attach rendered HTML";i(e)&&(a.call(e,"_svenjs")||(e._svenjs={rootNode:!1}),e._svenjs.rootNode=t),t.innerHTML="";var o=void 0;o=i(n)?n:e.render(),t.appendChild(d(o))}},function(e,t,n){var o=n(7),i=n(6),r=n(2);t.setState=function(e,t){t.state=o.saveState(t,e),t.time=i.saveHistory(t,e),r.lifeCycle(t)}},function(e,t,n){var o=n(4);n(11);t.createComponent=function(e){return e._svenjs={rootNode:!1},e.isBound||(e.isBound=!0,e.setState=function(e){return o.setState(e,this)}),e.isMounted||(e.time={history:[],pos:-1},e.isMounted=!0,void 0!==e.initialState&&(e.state=e.initialState),"function"==typeof e.componentDidMount&&e.componentDidMount.apply(e)),e}},function(e,t,n){var o=n(1);t.saveHistory=function(e,t){var n=void 0;return n=e.time?o.deepCopy(e.time):{history:[],pos:-1},n.history.splice(n.pos+1),n.history.push(o.deepCopy(t)),n.pos++,n}},function(e,t,n){var o=n(1);t.saveState=function(e,t){var n=o.deepCopy(t);return Object.freeze(n),n}},function(e,t,n){var o=n(1),i=n(2);t.timeTravel=function(e,t){var n=e.time,r=e.state;n.pos+=t,e.state=r,r=o.deepCopy(n.history[n.pos]),e.state=r,e.render(r,e._svenjs.rootNode),i.lifeCycle(e)}},function(e,t){t.version=function(){return"0.0.2-alpha"}},function(e,t){t.findDOMNode=function(e){}},function(e,t){t.log=function(e){e=e||"debug",console[e](this)}},function(e,t){var n=[];t.createStore=function(e){return e.isMounted||(e.listenTo=function(e){n.push(e)},e.emit=function(e){n.forEach(function(t){t(e)})},"function"==typeof e.init&&e.init.apply(e)),e}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}}])})},function(e,t,n){"use strict";var o=n(2),i=13,r=27,s=!1,a=!1,c=0,l=o.createComponent({displayName:"TodoMVC App",initialState:{messages:[{id:1,message:"Answer all the mail",complete:!1,editing:!1},{id:2,message:"Get a cup of coffee",complete:!1,editing:!1}]},componentDidUpdate:function(){var e=document.getElementById("new-todo");null!==e&&a&&(a=!1,e.focus(),e.setSelectionRange(e.value.length,e.value.length))},componentDidMount:function(){var e=self.history===!0?self.getPath():window.location.hash.replace(/.*#\//,"");this.setState({messages:this.state.messages,url:e}),window.addEventListener("hashchange",this.onHashChange.bind(this),!1)},handleEditTodoKeyDown:function(e){return e.keyCode===r?void this.simpleResetEditing():void(e.keyCode===i&&(this.saveTodo(e),this.resetEditing(),e.preventDefault()))},handleNewTodoKeyDown:function(e,t){t.keyCode===i&&(this.addTodo(t),t.innerHTML="",document.getElementById(e).focus(),t.preventDefault())},onHashChange:function(){var e=self.history===!0?self.getPath():window.location.hash.replace(/.*#\//,"");this.resetEditing(),this.setState({messages:this.state.messages,url:e})},saveTodo:function(e){var t="undefined"==typeof e.srcElement?e.target.value:e.srcElement.value,n=this.state.messages.filter(function(e){return e.id===c&&(e.message=t),e});this.setState({messages:n,url:this.state.url})},addTodo:function(e){var t=this.state.messages,n=void 0,o="undefined"==typeof e.srcElement?e.target.value:e.srcElement.value;n=0===t.length?1:t[t.length-1].id,t.push({id:n+1,message:o,complete:!1,editing:!1}),this.setState({messages:t,url:this.state.url})},destroyMessage:function(e){var t=this.state.messages.filter(function(t){return t.id!==e.id});this.setState({messages:t})},destroyCompleted:function(){var e=this.state.messages.filter(function(e){return e.complete===!1});this.resetEditing(),this.setState({messages:e,url:this.state.url})},toggleOne:function(e,t){var n=this.state.messages.filter(function(t){return t.id===e.id&&(t.complete=!t.complete),t});this.resetEditing(),this.setState({messages:n,url:this.state.url})},simpleResetEditing:function(){var e=this.state.messages.map(function(e){return e.editing=!1,e});a=!1,this.setState({messages:e,url:this.state.url})},resetEditing:function(e){var t=!1,n=this.state.messages.map(function(e){return e.editing&&(t=!0),e.editing=!1,e});t?(a=!0,this.setState({messages:n,url:this.state.url})):a=!1},onDoubleClick:function(e,t){if(c=e.id,!e.complete){var n=this.state.messages.map(function(t){return t.editing=t.id===e.id?!t.editing:!1,t});this.setState({messages:n,url:this.state.url});var o=document.getElementsByClassName("edit active")[0];o.focus(),o.setSelectionRange(o.value.length,o.value.length)}},toggleAll:function(){s=!s;var e=this.state.messages.map(function(e){return e.complete=s,e});this.resetEditing(),this.setState({messages:e})},listTodos:function(){var e=this.state.messages.filter(function(e){switch(this.state.url){case"active":return!e.complete;case"completed":return e.complete;default:return!0}}.bind(this),this);return e.map(function(e){var t=e.message,n=!1,o="todo",i="edit";return e.editing&&(o="todo editing",i="edit active"),e.complete&&(t={tag:"del",attrs:{},children:[e.message]},n=!0),{tag:"li",attrs:{className:o},children:[{tag:"div",attrs:{className:"view"},children:[{tag:"input",attrs:{className:"toggle",type:"checkbox",checked:n,onClick:this.toggleOne.bind(this,e)}},{tag:"label",attrs:{ondblclick:this.onDoubleClick.bind(this,e)},children:[t]},{tag:"button",attrs:{className:"destroy",onClick:this.destroyMessage.bind(this,e)}}]},{tag:"input",attrs:{className:i,type:"text",onKeyDown:this.handleEditTodoKeyDown.bind(this),value:e.message}}]}}.bind(this))},render:function(){var e=(this.state,""),t="",n="";return(""===this.state.url||"all"===this.state.url)&&(e="selected"),"active"===this.state.url&&(t="selected"),"completed"===this.state.url&&(n="selected"),{tag:"section",attrs:{"class":"todoapp"},children:[{tag:"header",attrs:{"class":"header"},children:[{tag:"h1",attrs:{},children:["todos"]},{tag:"input",attrs:{className:"new-todo",id:"new-todo",onClick:this.resetEditing.bind(this),onKeyDown:this.handleNewTodoKeyDown.bind(this,"new-todo"),placeholder:"What needs to be done?",autofocus:!0}}]},{tag:"section",attrs:{className:"main"},children:[{tag:"input",attrs:{className:"toggle-all",type:"checkbox",onClick:this.toggleAll.bind(this)}},{tag:"label",attrs:{"for":"toggle-all"},children:["Mark all as complete"]},{tag:"ul",attrs:{className:"todo-list"},children:[this.listTodos()]}]},{tag:"footer",attrs:{"class":"footer"},children:[{tag:"span",attrs:{"class":"todo-count"},children:[this.state.messages.length,1===this.state.messages.length?" item":" items"," remaining"]},{tag:"ul",attrs:{"class":"filters"},children:[{tag:"li",attrs:{},children:[{tag:"a",attrs:{href:"#/all","class":e},children:["All"]}]},{tag:"li",attrs:{},children:[{tag:"a",attrs:{href:"#/active","class":t},children:["Active"]}]},{tag:"li",attrs:{},children:[{tag:"a",attrs:{href:"#/completed","class":n},children:["Completed"]}]}]},{tag:"button",attrs:{"class":"clear-completed",onClick:this.destroyCompleted.bind(this)},children:["Clear completed"]}]}]}}});e.exports=l}])});